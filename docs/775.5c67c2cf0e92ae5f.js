"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[775],{9775:(jt,Y,l)=>{l.r(Y),l.d(Y,{FieldModule:()=>Yt});var at=l(8145),y=l(4218),L=l(8744);class p{constructor(a){if(a<1||a>6)throw new Error("Player position must be between 1 and 6.");this._position=a}get value(){return this._position}rotate(a){let i=this._position+(a._position-1);return i>6&&(i-=6),new p(i)}}class Z{constructor(a,e,i,n){this.actor=a,this.context=e,this.rotationOffset=new p(1),this.setPosition(i,n)}draw(){this.drawShape(),this.drawPosition(),this.drawActorName()}setPosition(a,e){this.x_percent=Math.max(0,Math.min(a/this.context.canvas.width,1)),this.y_percent=Math.max(0,Math.min(e/(this.context.canvas.height-60),1))}get x(){return this.context.canvas.width*this.x_percent}get y(){return(this.context.canvas.height-60)*this.y_percent}setRotationOffset(a){this.rotationOffset=a}currentPosition(){return this.actor.position.rotate(this.rotationOffset)}}var f=(()=>{return(o=f||(f={})).Circle="Circle",o.HalfCircle="HalfCircle",o.Triangle="Triangle",f;var o})();let F=(()=>{class o extends Z{constructor(e,i,n,r,s){super(e,i,n,r),this.dashed=s,this.shape_type=f.Circle}drawShape(){this.context.beginPath(),this.context.arc(this.x,this.y,o.RADIUS,0,2*Math.PI,!1),this.context.fillStyle="red",this.context.fill(),this.context.lineWidth=3,this.context.strokeStyle="#003300",this.context.setLineDash(this.dashed?[6]:[]),this.context.stroke()}drawPosition(){this.context.font="40px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.currentPosition().value.toString(),this.x,this.y+12)}drawActorName(){!this.actor.player_name||(this.context.font="20px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.actor.player_name,this.x,this.y+1.5*o.RADIUS))}isHit(e,i){return e>=this.x-o.RADIUS&&e<=this.x+o.RADIUS&&i>=this.y-o.RADIUS&&i<=this.y+o.RADIUS}copy(){return new o(this.actor.copy(),this.context,this.x,this.y,this.dashed)}toDto(){return{actor:this.actor.toDto(),dashed:this.dashed,shape_type:this.shape_type,x_percent:this.x_percent,y_percent:this.y_percent}}}return o.RADIUS=40,o})();var g=(()=>{return(o=g||(g={})).Setter="Setter",o.MiddleBlocker="Middle blocker",o.Libero="Libero",o.OutsideHitter="Outside hitter",o.OppositeHitter="Opposite hitter",g;var o})(),c=l(3075);function j(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}class D{constructor(a,e,i,n){this.position=a,this.player_role=e,this.player_name=i,this._UUID=n||j()}get UUID(){return this._UUID}static fromDto(a){return new D(new p(a.position),a.player_role,a.player_name,a.UUID)}toDto(){return{player_name:this.player_name,player_role:this.player_role,position:this.position.value,UUID:this.UUID}}copy(){return new D(this.position,this.player_role,this.player_name)}toString(){return this.player_name?`${this.player_name} (${this.position.value}) - ${this.player_role.toString()}`:`Unnamed actor (${this.position.value}) - ${this.player_role.toString()}`}}var t=l(5e3),A=l(9776),x=l(7429),m=l(508),Q=l(226),R=l(7579),rt=l(9770),st=l(9646),O=l(9300),q=l(5698),ct=l(8675),G=l(925),v=l(9808),h=l(1777),I=l(8255),V=l(1159),X=l(6360);function lt(o,a){}class P{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const ht={dialogContainer:(0,h.X$)("dialogContainer",[(0,h.SB)("void, exit",(0,h.oB)({opacity:0,transform:"scale(0.7)"})),(0,h.SB)("enter",(0,h.oB)({transform:"none"})),(0,h.eR)("* => enter",(0,h.ru)([(0,h.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,h.oB)({transform:"none",opacity:1})),(0,h.IO)("@*",(0,h.pV)(),{optional:!0})])),(0,h.eR)("* => void, * => exit",(0,h.ru)([(0,h.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,h.oB)({opacity:0})),(0,h.IO)("@*",(0,h.pV)(),{optional:!0})]))])};let dt=(()=>{class o extends x.en{constructor(e,i,n,r,s,d,u,b){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=n,this._config=s,this._interactivityChecker=d,this._ngZone=u,this._focusMonitor=b,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=J=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(J)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,G.ht)())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const n=()=>{e.removeEventListener("blur",n),e.removeEventListener("mousedown",n),e.removeAttribute("tabindex")};e.addEventListener("blur",n),e.addEventListener("mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=(0,G.ht)(),n=this._elementRef.nativeElement;(!i||i===this._document.body||i===n||n.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=(0,G.ht)();return e===i||e.contains(i)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(I.qV),t.Y36(t.sBO),t.Y36(v.K0,8),t.Y36(P),t.Y36(I.ic),t.Y36(t.R0b),t.Y36(I.tE))},o.\u0275dir=t.lG2({type:o,viewQuery:function(e,i){if(1&e&&t.Gf(x.Pl,7),2&e){let n;t.iGM(n=t.CRH())&&(i._portalOutlet=n.first)}},features:[t.qOj]}),o})(),mt=(()=>{class o extends dt{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return o.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(o)))(i||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&t.WFA("@dialogContainer.start",function(r){return i._onAnimationStart(r)})("@dialogContainer.done",function(r){return i._onAnimationDone(r)}),2&e&&(t.Ikx("id",i._id),t.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),t.d8E("@dialogContainer",i._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&t.YNc(0,lt,0,0,"ng-template",0)},directives:[x.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[ht.dialogContainer]}}),o})(),ut=0;class C{constructor(a,e,i="mat-dialog-"+ut++){this._overlayRef=a,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new R.x,this._afterClosed=new R.x,this._beforeClosed=new R.x,this._state=0,e._id=i,e._animationStateChanged.pipe((0,O.h)(n=>"opened"===n.state),(0,q.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,O.h)(n=>"closed"===n.state),(0,q.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),a.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),a.keydownEvents().pipe((0,O.h)(n=>n.keyCode===V.hY&&!this.disableClose&&!(0,V.Vb)(n))).subscribe(n=>{n.preventDefault(),z(this,"keyboard")}),a.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():z(this,"mouse")})}close(a){this._result=a,this._containerInstance._animationStateChanged.pipe((0,O.h)(e=>"closing"===e.state),(0,q.q)(1)).subscribe(e=>{this._beforeClosed.next(a),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(a){let e=this._getPositionStrategy();return a&&(a.left||a.right)?a.left?e.left(a.left):e.right(a.right):e.centerHorizontally(),a&&(a.top||a.bottom)?a.top?e.top(a.top):e.bottom(a.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(a="",e=""){return this._overlayRef.updateSize({width:a,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(a){return this._overlayRef.addPanelClass(a),this}removePanelClass(a){return this._overlayRef.removePanelClass(a),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function z(o,a,e){return void 0!==o._containerInstance&&(o._containerInstance._closeInteractionType=a),o.close(e)}const B=new t.OlP("MatDialogData"),pt=new t.OlP("mat-dialog-default-options"),W=new t.OlP("mat-dialog-scroll-strategy"),gt={provide:W,deps:[A.aV],useFactory:function ft(o){return()=>o.scrollStrategies.block()}};let _t=(()=>{class o{constructor(e,i,n,r,s,d,u,b,J,$t){this._overlay=e,this._injector=i,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=s,this._dialogRefConstructor=u,this._dialogContainerType=b,this._dialogDataToken=J,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new R.x,this._afterOpenedAtThisLevel=new R.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,rt.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,ct.O)(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function bt(o,a){return Object.assign(Object.assign({},a),o)}(i,this._defaultOptions||new P),i.id&&this.getDialogById(i.id);const n=this._createOverlay(i),r=this._attachDialogContainer(n,i),s=this._attachDialogContent(e,r,n,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),r._initializeWithAttachedContent(),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new A.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const r=t.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:P,useValue:i}]}),s=new x.C5(this._dialogContainerType,i.viewContainerRef,r,i.componentFactoryResolver);return e.attach(s).instance}_attachDialogContent(e,i,n,r){const s=new this._dialogRefConstructor(n,i,r.id);if(e instanceof t.Rgc)i.attachTemplatePortal(new x.UE(e,null,{$implicit:r.data,dialogRef:s}));else{const d=this._createInjector(r,s,i),u=i.attachComponentPortal(new x.C5(e,r.viewContainerRef,d,r.componentFactoryResolver));s.componentInstance=u.instance}return s.updateSize(r.width,r.height).updatePosition(r.position),s}_createInjector(e,i,n){const r=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!r||!r.get(Q.Is,null,t.XFs.Optional))&&s.push({provide:Q.Is,useValue:{value:e.direction,change:(0,st.of)()}}),t.zs3.create({parent:r||this._injector,providers:s})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((n,r)=>{n?r.setAttribute("aria-hidden",n):r.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let n=i.length-1;n>-1;n--){let r=i[n];r!==e&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return o.\u0275fac=function(e){t.$Z()},o.\u0275dir=t.lG2({type:o}),o})(),H=(()=>{class o extends _t{constructor(e,i,n,r,s,d,u,b){super(e,i,r,d,u,s,C,mt,B,b)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(A.aV),t.LFG(t.zs3),t.LFG(v.Ye,8),t.LFG(pt,8),t.LFG(W),t.LFG(o,12),t.LFG(A.Xj),t.LFG(X.Qb,8))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),xt=0,w=(()=>{class o{constructor(e,i,n){this._dialogRef=e,this._elementRef=i,this._dialog=n,this.id="mat-dialog-title-"+xt++}ngOnInit(){this._dialogRef||(this._dialogRef=function kt(o,a){let e=o.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?a.find(i=>i.id===e.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C,8),t.Y36(t.SBq),t.Y36(H))},o.\u0275dir=t.lG2({type:o,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,i){2&e&&t.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),o})(),yt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[H,gt],imports:[[A.U8,x.eL,m.BQ],m.BQ]}),o})();var _=l(7322),$=l(7531),T=l(4107),M=l(7423);let vt=(()=>{class o{constructor(e,i){this.fb=e,this.dialogRef=i,this.PlayerRole=g}onSubmit(){this.dialogRef.close(new D(new p(this.formGroup.value.position),this.formGroup.value.player_role,this.formGroup.value.player_name))}ngOnInit(){this.formGroup=this.fb.group({player_name:[null],position:[null,c.kI.required],player_role:[null,c.kI.required]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vpms-add-actor-dialog"]],decls:50,vars:43,consts:[["mat-dialog-title",""],[3,"formGroup","submit"],["appearance","fill"],["matInput","","formControlName","player_name"],["formControlName","position"],[3,"value"],["formControlName","player_role"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(4,"form")(5,"mat-form-field",2)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",3),t.qZA(),t.TgZ(10,"mat-form-field",2)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"mat-select",4)(15,"mat-option",5),t._uU(16,"1"),t.qZA(),t.TgZ(17,"mat-option",5),t._uU(18,"2"),t.qZA(),t.TgZ(19,"mat-option",5),t._uU(20,"3"),t.qZA(),t.TgZ(21,"mat-option",5),t._uU(22,"4"),t.qZA(),t.TgZ(23,"mat-option",5),t._uU(24,"5"),t.qZA(),t.TgZ(25,"mat-option",5),t._uU(26,"6"),t.qZA()()(),t.TgZ(27,"mat-form-field",2)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"mat-select",6)(32,"mat-option",5),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-option",5),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"mat-option",5),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-option",5),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"mat-option",5),t._uU(45),t.ALo(46,"translate"),t.qZA()()(),t.TgZ(47,"button",7),t._uU(48),t.ALo(49,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,23,"add_actor_dialog.title")),t.xp6(2),t.Q6J("formGroup",i.formGroup),t.xp6(4),t.Oqu(t.lcZ(8,25,"add_actor_dialog.placeholder.player_name")),t.xp6(5),t.Oqu(t.lcZ(13,27,"add_actor_dialog.placeholder.position")),t.xp6(3),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(2),t.Q6J("value",5),t.xp6(2),t.Q6J("value",6),t.xp6(4),t.Oqu(t.lcZ(30,29,"add_actor_dialog.placeholder.player_role")),t.xp6(3),t.Q6J("value",i.PlayerRole.Setter),t.xp6(1),t.Oqu(t.lcZ(34,31,"add_actor_dialog.player_roles.setter")),t.xp6(2),t.Q6J("value",i.PlayerRole.MiddleBlocker),t.xp6(1),t.Oqu(t.lcZ(37,33,"add_actor_dialog.player_roles.middle_blocker")),t.xp6(2),t.Q6J("value",i.PlayerRole.Libero),t.xp6(1),t.Oqu(t.lcZ(40,35,"add_actor_dialog.player_roles.libero")),t.xp6(2),t.Q6J("value",i.PlayerRole.OutsideHitter),t.xp6(1),t.Oqu(t.lcZ(43,37,"add_actor_dialog.player_roles.outside_hitter")),t.xp6(2),t.Q6J("value",i.PlayerRole.OppositeHitter),t.xp6(1),t.Oqu(t.lcZ(46,39,"add_actor_dialog.player_roles.opposite_hitter")),t.xp6(2),t.Q6J("disabled",i.formGroup.invalid),t.xp6(1),t.hij(" ",t.lcZ(49,41,"add_actor_dialog.submit")," "))},directives:[w,S,c.JL,c.sg,c._Y,_.KE,_.hX,$.Nt,c.Fj,c.JJ,c.u,T.gD,m.ey,M.lW],pipes:[y.X$],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),o})(),K=(()=>{class o extends Z{constructor(e,i,n,r){super(e,i,n,r),this.shape_type=f.HalfCircle}drawShape(){this.context.beginPath(),this.context.arc(this.x,this.y,o.RADIUS,0,Math.PI,!0),this.context.fillStyle="red",this.context.fill(),this.context.setLineDash([]),this.context.closePath(),this.context.lineWidth=3,this.context.strokeStyle="#003300",this.context.stroke()}drawPosition(){this.context.font="40px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.currentPosition().value.toString(),this.x,this.y-10)}drawActorName(){!this.actor.player_name||(this.context.font="20px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.actor.player_name,this.x,this.y+o.RADIUS/2))}isHit(e,i){return e>=this.x-o.RADIUS&&e<=this.x+o.RADIUS&&i>=this.y-o.RADIUS&&i<=this.y}copy(){return new o(this.actor.copy(),this.context,this.x,this.y)}toDto(){return{actor:this.actor.toDto(),shape_type:this.shape_type,x_percent:this.x_percent,y_percent:this.y_percent}}}return o.RADIUS=50,o})(),N=(()=>{class o extends Z{constructor(e,i,n,r,s){super(e,i,n,r),this.dashed=s,this.shape_type=f.Triangle}drawActorName(){!this.actor.player_name||(this.context.font="20px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.actor.player_name,this.x,this.y+1.6*o.HEIGHT))}drawPosition(){this.context.font="40px Roboto",this.context.fillStyle="#000000",this.context.textAlign="center",this.context.fillText(this.currentPosition().value.toString(),this.x-2,this.y+25)}drawShape(){this.context.beginPath(),this.context.lineWidth=4,this.context.strokeStyle="#003300",this.context.setLineDash(this.dashed?[6]:[]),this.context.moveTo(this.x-o.WIDTH,this.y+o.HEIGHT),this.context.lineTo(this.x+o.WIDTH,this.y+o.HEIGHT),this.context.lineTo(this.x,this.y-o.HEIGHT),this.context.closePath(),this.context.stroke(),this.context.fillStyle="red",this.context.fill()}isHit(e,i){return e>=this.x-o.WIDTH&&e<=this.x+o.WIDTH&&i>=this.y-o.HEIGHT&&i<=this.y+o.HEIGHT}copy(){return new o(this.actor.copy(),this.context,this.x,this.y,this.dashed)}toDto(){return{actor:this.actor.toDto(),dashed:this.dashed,shape_type:this.shape_type,x_percent:this.x_percent,y_percent:this.y_percent}}}return o.WIDTH=40,o.HEIGHT=40,o})();function Ct(o,a){if(1&o&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.UUID),t.xp6(1),t.Oqu(e.toString())}}let Dt=(()=>{class o{constructor(e,i,n){this.fb=e,this.dialogRef=i,this.data=n}onSubmit(){this.dialogRef.close(this.formGroup.value.actor)}ngOnInit(){this.formGroup=this.fb.group({actor:[null,c.kI.required]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(C),t.Y36(B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vpms-delete-actor-dialog"]],decls:14,vars:12,consts:[["mat-dialog-title",""],[3,"formGroup","submit"],["appearance","fill"],["formControlName","actor"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(4,"form")(5,"mat-form-field",2)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",3),t.YNc(10,Ct,2,2,"mat-option",4),t.qZA()(),t.TgZ(11,"button",5),t._uU(12),t.ALo(13,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"delete_actor_dialog.title")),t.xp6(2),t.Q6J("formGroup",i.formGroup),t.xp6(4),t.Oqu(t.lcZ(8,8,"delete_actor_dialog.placeholder.actor")),t.xp6(3),t.Q6J("ngForOf",i.data.actors),t.xp6(1),t.Q6J("disabled",i.formGroup.invalid),t.xp6(1),t.hij(" ",t.lcZ(13,10,"delete_actor_dialog.submit")," "))},directives:[w,S,c.JL,c.sg,c._Y,_.KE,_.hX,T.gD,c.JJ,c.u,v.sg,m.ey,M.lW],pipes:[y.X$],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),o})();class k{constructor(a,e,i,n){this.shapes=a,this.rotation=e,this.name=i,this._UUID=n||j()}get UUID(){return this._UUID}static fromDto(a,e){const i=a.shapes.map(n=>class At{static fromDto(a,e){const i=D.fromDto(a.actor),n=e.canvas.width*a.x_percent,r=(e.canvas.height-60)*a.y_percent;switch(a.shape_type){case f.Circle:return new F(i,e,n,r,a.dashed);case f.HalfCircle:return new K(i,e,n,r);case f.Triangle:return new N(i,e,n,r,a.dashed)}}}.fromDto(n,e));return new k(i,new p(a.rotation),a.name,a.UUID)}toDto(){return{name:this.name,rotation:this.rotation.value,shapes:this.shapes.map(a=>a.toDto()),UUID:this.UUID}}addShape(a){a.setRotationOffset(this.rotation),this.shapes.push(a)}removeShapeByActorUUID(a){const e=this.shapes.findIndex(i=>i.actor.UUID===a);null!=e&&this.shapes.splice(e,1)}toString(){return this.name?`${this.name} (${this.rotation.value})`:`Unknown rotation (${this.rotation.value})`}}function Rt(o,a){if(1&o&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.UUID),t.xp6(1),t.Oqu(e.toString())}}let Tt=(()=>{class o{constructor(e,i,n){this.fb=e,this.dialogRef=i,this.data=n}onSubmit(){this.dialogRef.close(this.formGroup.value.rotation)}ngOnInit(){this.formGroup=this.fb.group({rotation:[null,c.kI.required]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(C),t.Y36(B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vpms-delete-rotation-dialog"]],decls:14,vars:12,consts:[["mat-dialog-title",""],[3,"formGroup","submit"],["appearance","fill"],["formControlName","rotation"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(4,"form")(5,"mat-form-field",2)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",3),t.YNc(10,Rt,2,2,"mat-option",4),t.qZA()(),t.TgZ(11,"button",5),t._uU(12),t.ALo(13,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"delete_rotation_dialog.title")),t.xp6(2),t.Q6J("formGroup",i.formGroup),t.xp6(4),t.Oqu(t.lcZ(8,8,"delete_rotation_dialog.placeholder.rotation")),t.xp6(3),t.Q6J("ngForOf",i.data.rotations),t.xp6(1),t.Q6J("disabled",i.formGroup.invalid),t.xp6(1),t.hij(" ",t.lcZ(13,10,"delete_rotation_dialog.submit")," "))},directives:[w,S,c.JL,c.sg,c._Y,_.KE,_.hX,T.gD,c.JJ,c.u,v.sg,m.ey,M.lW],pipes:[y.X$],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),o})();var U=l(3191),tt=l(7144);const Mt=["input"],Ot=function(o){return{enterDuration:o}},It=["*"],wt=new t.OlP("mat-checkbox-default-options",{providedIn:"root",factory:et});function et(){return{color:"accent",clickAction:"check-indeterminate"}}let St=0;const it=et(),Ut={provide:c.JU,useExisting:(0,t.Gpc)(()=>ot),multi:!0};class Et{}const Lt=(0,m.sb)((0,m.pj)((0,m.Kr)((0,m.Id)(class{constructor(o){this._elementRef=o}}))));let ot=(()=>{class o extends Lt{constructor(e,i,n,r,s,d,u){super(e),this._changeDetectorRef=i,this._focusMonitor=n,this._ngZone=r,this._animationMode=d,this._options=u,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++St,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new t.vpe,this.indeterminateChange=new t.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||it,this.color=this.defaultColor=this._options.color||it.color,this.tabIndex=parseInt(s)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=(0,U.Ig)(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){const i=(0,U.Ig)(e);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const i=(0,U.Ig)(e);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const i=e!=this._indeterminate;this._indeterminate=(0,U.Ig)(e),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let i=this._currentCheckState,n=this._elementRef.nativeElement;if(i!==e&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const r=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(r)},1e3)})}}_emitChangeEvent(){const e=new Et;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_onInputClick(e){var i;const n=null===(i=this._options)||void 0===i?void 0:i.clickAction;e.stopPropagation(),this.disabled||"noop"===n?!this.disabled&&"noop"===n&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,i){e?this._focusMonitor.focusVia(this._inputElement,e,i):this._inputElement.nativeElement.focus(i)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,i){if("NoopAnimations"===this._animationMode)return"";let n="";switch(e){case 0:if(1===i)n="unchecked-checked";else{if(3!=i)return"";n="unchecked-indeterminate"}break;case 2:n=1===i?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===i?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===i?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}_syncIndeterminate(e){const i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(I.tE),t.Y36(t.R0b),t.$8M("tabindex"),t.Y36(X.Qb,8),t.Y36(wt,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-checkbox"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Mt,5),t.Gf(m.wG,5)),2&e){let n;t.iGM(n=t.CRH())&&(i._inputElement=n.first),t.iGM(n=t.CRH())&&(i.ripple=n.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(e,i){2&e&&(t.Ikx("id",i.id),t.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),t.ekj("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[t._Bn([Ut]),t.qOj],ngContentSelectors:It,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,i){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),t.NdJ("change",function(r){return i._onInteractionEvent(r)})("click",function(r){return i._onInputClick(r)}),t.qZA(),t.TgZ(5,"span",5),t._UZ(6,"span",6),t.qZA(),t._UZ(7,"span",7),t.TgZ(8,"span",8),t.O4$(),t.TgZ(9,"svg",9),t._UZ(10,"path",10),t.qZA(),t.kcU(),t._UZ(11,"span",11),t.qZA()(),t.TgZ(12,"span",12,13),t.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),t.TgZ(14,"span",14),t._uU(15,"\xa0"),t.qZA(),t.Hsn(16),t.qZA()()),2&e){const n=t.MAs(1),r=t.MAs(13);t.uIk("for",i.inputId),t.xp6(2),t.ekj("mat-checkbox-inner-container-no-side-margin",!r.textContent||!r.textContent.trim()),t.xp6(1),t.Q6J("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),t.uIk("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),t.xp6(2),t.Q6J("matRippleTrigger",n)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",t.VKq(19,Ot,"NoopAnimations"===i._animationMode?0:150))}},directives:[m.wG,tt.wD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),o})(),nt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})(),qt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.si,m.BQ,tt.Q8,nt],m.BQ,nt]}),o})(),Gt=(()=>{class o{constructor(e,i){this.fb=e,this.dialogRef=i}onSubmit(){this.dialogRef.close({rotation:new k([],new p(this.formGroup.value.current_rotation),this.formGroup.value.rotation_name),copy_shapes:this.formGroup.value.copy_shapes})}ngOnInit(){this.formGroup=this.fb.group({rotation_name:null,copy_shapes:!0,current_rotation:[1,c.kI.required]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vpms-add-rotation-dialog"]],decls:33,vars:23,consts:[["mat-dialog-title",""],[3,"formGroup","submit"],["appearance","fill"],["matInput","","formControlName","rotation_name"],["formControlName","current_rotation"],[3,"value"],["formControlName","copy_shapes"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(4,"form")(5,"mat-form-field",2)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",3),t.qZA(),t.TgZ(10,"mat-form-field",2)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"mat-select",4)(15,"mat-option",5),t._uU(16,"1"),t.qZA(),t.TgZ(17,"mat-option",5),t._uU(18,"2"),t.qZA(),t.TgZ(19,"mat-option",5),t._uU(20,"3"),t.qZA(),t.TgZ(21,"mat-option",5),t._uU(22,"4"),t.qZA(),t.TgZ(23,"mat-option",5),t._uU(24,"5"),t.qZA(),t.TgZ(25,"mat-option",5),t._uU(26,"6"),t.qZA()()(),t.TgZ(27,"mat-checkbox",6),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"button",7),t._uU(31),t.ALo(32,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,13,"add_rotation_dialog.title")),t.xp6(2),t.Q6J("formGroup",i.formGroup),t.xp6(4),t.Oqu(t.lcZ(8,15,"add_rotation_dialog.placeholder.rotation_name")),t.xp6(5),t.Oqu(t.lcZ(13,17,"add_rotation_dialog.placeholder.current_rotation")),t.xp6(3),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(2),t.Q6J("value",5),t.xp6(2),t.Q6J("value",6),t.xp6(3),t.hij(" ",t.lcZ(29,19,"add_rotation_dialog.placeholder.copy_shapes")," "),t.xp6(2),t.Q6J("disabled",i.formGroup.invalid),t.xp6(1),t.hij(" ",t.lcZ(32,21,"add_rotation_dialog.submit")," "))},directives:[w,S,c.JL,c.sg,c._Y,_.KE,_.hX,$.Nt,c.Fj,c.JJ,c.u,T.gD,m.ey,ot,M.lW],pipes:[y.X$],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%]{margin-top:1rem}"]}),o})();class E{static store(a,e){const i=JSON.stringify(e);window.localStorage.setItem(a,i)}static retrieve(a){const e=window.localStorage.getItem(a);if(e)return JSON.parse(e)}static remove(a){window.localStorage.removeItem(a)}}var Pt=l(4594);const Bt=["field"];function Ht(o,a){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.UUID),t.xp6(1),t.Oqu(e.toString())}}const Nt=[{path:"",component:(()=>{class o{constructor(e,i,n){this.router=e,this.formBuilder=i,this.matDialog=n,this.rotations=[],this.currentRotationIndex=0,this.formGroup=this.formBuilder.group({current_rotation:[null,c.kI.required]})}get rotation(){return this.rotations[this.currentRotationIndex]}ngAfterViewInit(){this.context=this.fieldElement.nativeElement.getContext("2d"),this.context.canvas.width=window.innerWidth,this.context.canvas.height=window.innerHeight-o.NAVIGATION_BAR_HEIGHT_IN_PX,this.fieldElement.nativeElement.addEventListener("mousedown",e=>this.onMouseDown(e)),this.fieldElement.nativeElement.addEventListener("mouseup",e=>this.onMouseUp(e)),this.fieldElement.nativeElement.addEventListener("mouseleave",e=>this.onMouseUp(e)),this.fieldElement.nativeElement.addEventListener("mousemove",e=>this.onMouseMove(e)),setTimeout(()=>{const e=new URLSearchParams(window.location.search);if(e.get("data")&&e.get("current_rotation")){this.rotations=JSON.parse(atob(e.get("data"))).map(n=>k.fromDto(n,this.context));const i=e.get("current_rotation");this.currentRotationIndex=this.rotations.findIndex(n=>n.UUID===i)}else{const i=E.retrieve(o.LOCAL_STORAGE_KEY);if(i){this.rotations=i.map(r=>k.fromDto(r,this.context));const n=E.retrieve(o.LOCAL_STORAGE_KEY_CURRENT_ROTATION);this.currentRotationIndex=this.rotations.findIndex(r=>r.UUID===n)}else this.rotations=[new k([],new p(1),"Default rotation")]}this.formGroup.patchValue({current_rotation:this.rotation.UUID}),this.formGroup.valueChanges.subscribe(i=>this.onRotationChanged(i.current_rotation)),this.render()},100)}onRotationChanged(e){this.currentRotationIndex=this.rotations.findIndex(i=>i.UUID===e),this.render()}onMouseDown(e){const i=e.clientX,n=e.clientY-o.NAVIGATION_BAR_HEIGHT_IN_PX;for(let r=this.rotation.shapes.length-1;r>=0;--r){const s=this.rotation.shapes[r];if(s.isHit(i,n))return void(this.draggedShape=s)}}onMouseUp(e){this.draggedShape=void 0}onMouseMove(e){this.draggedShape&&(this.draggedShape.setPosition(e.clientX,e.clientY-o.NAVIGATION_BAR_HEIGHT_IN_PX),this.render())}onAddActorClicked(){this.matDialog.open(vt).afterClosed().subscribe(i=>{if(!i)return;const n=window.innerWidth/2,r=window.innerHeight/2;switch(i.player_role){case g.Setter:this.rotation.addShape(new K(i,this.context,n,r));break;case g.MiddleBlocker:this.rotation.addShape(new N(i,this.context,n,r,!1));break;case g.Libero:this.rotation.addShape(new N(i,this.context,n,r,!0));break;case g.OutsideHitter:this.rotation.addShape(new F(i,this.context,n,r,!1));break;case g.OppositeHitter:this.rotation.addShape(new F(i,this.context,n,r,!0))}this.render()})}onDeleteActorClicked(){this.matDialog.open(Dt,{data:{actors:this.rotation.shapes.map(i=>i.actor)}}).afterClosed().subscribe(i=>{!i||(this.rotation.removeShapeByActorUUID(i),this.render())})}onDeleteRotationClicked(){this.matDialog.open(Tt,{data:{rotations:this.rotations}}).afterClosed().subscribe(i=>{if(!i)return;const n=this.rotation.UUID,r=this.rotations.findIndex(s=>s.UUID===i);this.rotations.splice(r,1),n===i&&(0===this.rotations.length&&this.rotations.push(new k([],new p(1),"Default rotation")),this.currentRotationIndex=0,this.formGroup.patchValue({current_rotation:this.rotation.UUID})),this.render()})}onAddRotationClicked(){this.matDialog.open(Gt).afterClosed().subscribe(i=>{!i||(i.copy_shapes&&this.rotation.shapes.forEach(n=>i.rotation.addShape(n.copy())),this.rotations.push(i.rotation),this.currentRotationIndex=this.rotations.length-1,this.formGroup.patchValue({current_rotation:i.rotation.UUID}),this.render())})}render(){this.initCourt(),this.rotation.shapes.forEach(e=>e.draw()),E.store(o.LOCAL_STORAGE_KEY,this.rotations.map(e=>e.toDto())),E.store(o.LOCAL_STORAGE_KEY_CURRENT_ROTATION,this.rotation.UUID),this.router.navigate(["/"],{queryParams:{current_rotation:this.rotation.UUID,data:btoa(JSON.stringify(this.rotations.map(e=>e.toDto())))},queryParamsHandling:"merge"})}initCourt(){this.context.clearRect(0,0,window.innerWidth,window.innerHeight),this.context.fillStyle=o.OUTER_COLOR,this.context.fillRect(0,0,window.innerWidth,window.innerHeight);const e=.1*window.innerWidth,i=.15*window.innerHeight,n=(window.innerHeight-i)/10,r=(window.innerWidth-2*e)/9,s=e,d=window.innerWidth-2*e;this.context.fillStyle=o.FRONT_FIELD_COLOR,this.context.fillRect(s,0,d,4*n),this.context.fillStyle=o.BACK_FIELD_COLOR,this.context.fillRect(s,4*n,d,6*n);const u=n/20,b=r/20;this.context.fillStyle=o.LINE_COLOR,this.context.fillRect(s,0,b,10*n),this.context.fillRect(d+s-b,0,b,10*n),this.context.fillRect(s,4*n,d,u),this.context.fillRect(s,10*n,d,u),this.context.fillRect(s,1*n-3*u,d,3*u)}}return o.OUTER_COLOR="#469ABB",o.LINE_COLOR="#FFFFFF",o.FRONT_FIELD_COLOR="#FF5202",o.BACK_FIELD_COLOR="#F8A941",o.NAVIGATION_BAR_HEIGHT_IN_PX=60,o.LOCAL_STORAGE_KEY="rotations_storage",o.LOCAL_STORAGE_KEY_CURRENT_ROTATION="current_rotation_uuid",o.\u0275fac=function(e){return new(e||o)(t.Y36(L.F0),t.Y36(c.qu),t.Y36(H))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vpms-field"]],viewQuery:function(e,i){if(1&e&&t.Gf(Bt,5),2&e){let n;t.iGM(n=t.CRH())&&(i.fieldElement=n.first)}},decls:19,vars:14,consts:[["color","primary"],[3,"formGroup"],["formControlName","current_rotation"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click"],["id","rightSide"],["field",""],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"mat-form-field",1)(2,"mat-select",2),t.YNc(3,Ht,2,2,"mat-option",3),t.qZA()(),t.TgZ(4,"button",4),t.NdJ("click",function(){return i.onAddRotationClicked()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onDeleteRotationClicked()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",5)(11,"button",4),t.NdJ("click",function(){return i.onAddActorClicked()}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",4),t.NdJ("click",function(){return i.onDeleteActorClicked()}),t._uU(15),t.ALo(16,"translate"),t.qZA()()(),t._UZ(17,"canvas",null,6)),2&e&&(t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(2),t.Q6J("ngForOf",i.rotations),t.xp6(2),t.hij(" ",t.lcZ(6,6,"field.add_rotation")," "),t.xp6(3),t.hij(" ",t.lcZ(9,8,"field.delete_rotation")," "),t.xp6(4),t.hij(" ",t.lcZ(13,10,"field.add_actor")," "),t.xp6(3),t.hij(" ",t.lcZ(16,12,"field.delete_actor")," "))},directives:[Pt.Ye,_.KE,c.JL,c.sg,T.gD,c.JJ,c.u,v.sg,m.ey,M.lW],pipes:[y.X$],styles:["[_nghost-%COMP%]{display:block;height:100%}mat-toolbar[_ngcontent-%COMP%]{height:60px}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem}mat-toolbar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}mat-toolbar[_ngcontent-%COMP%]   #rightSide[_ngcontent-%COMP%]{margin-left:auto}canvas[_ngcontent-%COMP%]{display:block;height:calc(100% - 60px);width:100%}"]}),o})()}];let Jt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[L.Bz.forChild(Nt)],L.Bz]}),o})(),Yt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[Jt,at.m,y.aw,yt,c.UX,v.ez,qt]]}),o})()}}]);